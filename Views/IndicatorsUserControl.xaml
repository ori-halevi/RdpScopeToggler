<UserControl x:Class="RdpScopeToggler.Views.IndicatorsUserControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:prism="http://prismlibrary.com/"
             xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
             xmlns:materialDesignElevation="clr-namespace:MaterialDesignThemes.Wpf;assembly=MaterialDesignThemes.Wpf"
             xmlns:converter="clr-namespace:RdpScopeToggler.Converters"
             prism:ViewModelLocator.AutoWireViewModel="True">

    <UserControl.Resources>
        <converter:BoolToBrushConverter x:Key="BoolToBrushConverter" />
        <converter:BoolToOpacityConverter x:Key="BoolToOpacityConverter" />

        <!-- Colors -->
        <SolidColorBrush x:Key="ActiveBrush" Color="#00E676"/>
        <SolidColorBrush x:Key="InactiveBrush" Color="#BDBDBD"/>
        <SolidColorBrush x:Key="ExternalBrush" Color="#FF3D00"/>
        <SolidColorBrush x:Key="WhiteListBrush" Color="#2979FF"/>
        <SolidColorBrush x:Key="InternalBrush" Color="#FF9100"/>
        <SolidColorBrush x:Key="AlwaysOnBrush" Color="#D500F9"/>

        <!-- Glow Effect Template -->
        <Style x:Key="GlowEllipseStyle" TargetType="Ellipse">
            <Setter Property="Width" Value="22"/>
            <Setter Property="Height" Value="22"/>
            <Setter Property="StrokeThickness" Value="0"/>
            <Setter Property="Effect">
                <Setter.Value>
                    <DropShadowEffect BlurRadius="10" ShadowDepth="0" Opacity="0.5"/>
                </Setter.Value>
            </Setter>
            <Setter Property="RenderTransformOrigin" Value="0.5,0.5"/>
            <Setter Property="RenderTransform">
                <Setter.Value>
                    <ScaleTransform ScaleX="1" ScaleY="1"/>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <Trigger Property="Tag" Value="True">
                    <Trigger.EnterActions>
                        <BeginStoryboard>
                            <Storyboard RepeatBehavior="Forever" AutoReverse="True">
                                <DoubleAnimation Storyboard.TargetProperty="Opacity"
                                                 From="0.6" To="1.0" Duration="0:0:1.2" />
                                <DoubleAnimation Storyboard.TargetProperty="RenderTransform.(ScaleTransform.ScaleX)"
                                                 From="1.0" To="1.2" Duration="0:0:1.2" />
                                <DoubleAnimation Storyboard.TargetProperty="RenderTransform.(ScaleTransform.ScaleY)"
                                                 From="1.0" To="1.2" Duration="0:0:1.2" />
                            </Storyboard>
                        </BeginStoryboard>
                    </Trigger.EnterActions>
                </Trigger>
            </Style.Triggers>
        </Style>

        <!-- ToolTip Style -->
        <Style TargetType="ToolTip">
            <Setter Property="Background" Value="#222"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontSize" Value="13"/>
            <Setter Property="Padding" Value="6,3"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Effect">
                <Setter.Value>
                    <DropShadowEffect BlurRadius="5" ShadowDepth="0" Opacity="0.3"/>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Icon Style -->
        <Style x:Key="IconStyle" TargetType="materialDesign:PackIcon">
            <Setter Property="Width" Value="15"/>
            <Setter Property="Height" Value="15"/>
            <Setter Property="HorizontalAlignment" Value="Center"/>
            <Setter Property="VerticalAlignment" Value="Center"/>
            <Setter Property="Foreground" Value="White"/>
        </Style>

    </UserControl.Resources>

    <Border BorderThickness="1" BorderBrush="#dee2e6"
            CornerRadius="18"
            Padding="14,10"
            materialDesignElevation:ShadowAssist.ShadowDepth="Depth3">
        <Border.Background>
            <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                <GradientStop Color="#e9ecef" Offset="1" />
                <GradientStop Color="#e9ecef" Offset="0.2" />
                <GradientStop Color="#f8f9fa" Offset="0" />
            </LinearGradientBrush>
        </Border.Background>

        <StackPanel Orientation="Horizontal" 
                    HorizontalAlignment="Stretch" 
                    VerticalAlignment="Center">

            <!-- External Network Indicator -->
            <Grid ToolTip="גישה לרשתות חיצוניות" Margin="3">
                <Ellipse Style="{StaticResource GlowEllipseStyle}"
                         Fill="{StaticResource ExternalBrush}"
                         Tag="{Binding IsExternalOpen}"/>
                <materialDesign:PackIcon Kind="Earth" Style="{StaticResource IconStyle}" />
                <Grid.Opacity>
                    <Binding Path="IsExternalOpen" Converter="{StaticResource BoolToOpacityConverter}" />
                </Grid.Opacity>
            </Grid>

            <!-- White List Network Indicator -->
            <Grid ToolTip="גישה לרשימה לבנה" Margin="3">
                <Ellipse Style="{StaticResource GlowEllipseStyle}"
                         Fill="{StaticResource WhiteListBrush}"
                         Tag="{Binding IsWhiteListOpen}"/>
                <materialDesign:PackIcon Kind="Shield" Style="{StaticResource IconStyle}" />
                <Grid.Opacity>
                    <Binding Path="IsWhiteListOpen" Converter="{StaticResource BoolToOpacityConverter}" />
                </Grid.Opacity>
            </Grid>

            <!-- Internal Network Indicator -->
            <Grid ToolTip="גישה לכל הרשתות פנימיות" Margin="3">
                <Ellipse Style="{StaticResource GlowEllipseStyle}"
                         Fill="{StaticResource InternalBrush}"
                         Tag="{Binding IsInternalOpen}"/>
                <materialDesign:PackIcon Kind="Lan" Style="{StaticResource IconStyle}" />
                <Grid.Opacity>
                    <Binding Path="IsInternalOpen" Converter="{StaticResource BoolToOpacityConverter}" />
                </Grid.Opacity>
            </Grid>

            <!-- AlwaysOn Network Indicator -->
            <Grid ToolTip="גישה לרשתות פנימיות שנבחרו" Margin="3">
                <Ellipse Style="{StaticResource GlowEllipseStyle}"
                         Fill="{StaticResource AlwaysOnBrush}"
                         Tag="{Binding IsAlwaysOnOpen}"/>
                <materialDesign:PackIcon Kind="Power" Style="{StaticResource IconStyle}" />
                <Grid.Opacity>
                    <Binding Path="IsAlwaysOnOpen" Converter="{StaticResource BoolToOpacityConverter}" />
                </Grid.Opacity>
            </Grid>

        </StackPanel>
    </Border>
</UserControl>
